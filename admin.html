<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel | Vektör Yükle</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .upload-container { border: 2px dashed #f39c12; padding: 40px; border-radius: 15px; text-align: center; width: 400px; }
        .btn { background: #f39c12; color: #000; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 20px; text-decoration: none; display: inline-block; }
        input[type="text"] { width: 100%; padding: 10px; margin-top: 10px; background: #222; border: 1px solid #444; color: #fff; }
        #status { margin-top: 15px; font-size: 14px; color: #f39c12; }
    </style>
</head>
<body>
    <div class="upload-container">
        <h2>Vektör Yükleme Paneli</h2>
        <p>EPS ve JPEG dosyasýný seçin</p>

        <input type="text" id="token" placeholder="GitHub Token (ghp_...)" />
        <input type="text" id="title" placeholder="Vektör Baþlýðý" />
        <input type="file" id="fileInput" multiple style="display:none" />
        <button class="btn" onclick="document.getElementById('fileInput').click()">Dosyalarý Seç</button>
        <br>
        <button class="btn" style="background:#27ae60" onclick="uploadFiles()">Sisteme Yükle</button>

        <div id="status"></div>
    </div>

    <script>
        // GitHub Bilgilerin
        const OWNER = 'hakankacar2014-demir';
        const REPO = 'vector-storage';

        async function uploadFiles() {
            const token = document.getElementById('token').value;
            const title = document.getElementById('title').value;
            const files = document.getElementById('fileInput').files;
            const status = document.getElementById('status');

            if(!token || !title || files.length < 2) {
                status.innerText = "Hata: Token, Baþlýk ve 2 dosya (EPS+JPG) zorunludur!";
                return;
            }

            status.innerText = "Yükleniyor... Lütfen bekleyin.";

            for (let file of files) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = async () => {
                    const content = reader.result.split(',')[1];
                    const path = `vectors/${title}/${file.name}`;

                    const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/${path}`, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${token}`, 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: `Yeni vektör: ${title}`,
                            content: content
                        })
                    });

                    if(response.ok) {
                        status.innerText = "Baþarýyla yüklendi! Ana sayfayý yenileyin.";
                    } else {
                        status.innerText = "Yükleme hatasý! Token'ý kontrol edin.";
                    }
                };
            }
        }
    </script>
</body>
</html>