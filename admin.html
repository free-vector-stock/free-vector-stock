<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ADMIN UPLOADER</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; padding: 50px; background: #f0f0f0; }
        .box { background: #fff; padding: 40px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 400px; }
        input, button { width: 100%; padding: 15px; margin-bottom: 20px; box-sizing: border-box; }
        button { background: #000; color: #fff; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
<div class="box">
    <h2>Upload Assets</h2>
    <input type="password" id="token" placeholder="GitHub Token">
    <input type="file" id="files" multiple>
    <div id="status"></div>
    <button onclick="upload()">SYNC TO GITHUB</button>
</div>

<script>
    async function upload() {
        const token = document.getElementById('token').value;
        const files = document.getElementById('files').files;
        const status = document.getElementById('status');
        if(!token || files.length === 0) return alert("Fill all fields");

        for(let file of files) {
            status.innerText = "Uploading: " + file.name;
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                const content = reader.result.split(',')[1];
                const url = `https://api.github.com/repos/free-vector-stock/free-vector-stock/contents/assets/${file.name}`;
                
                const check = await fetch(url, { headers: { 'Authorization': `token ${token}` } });
                let sha = null; if(check.ok) { const d = await check.json(); sha = d.sha; }

                const res = await fetch(url, {
                    method: 'PUT',
                    headers: { 'Authorization': `token ${token}`, 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: "upload", content, sha })
                });
                if(res.ok) status.innerText = "Success: " + file.name;
            };
        }
    }
</script>
</body>
</html>
